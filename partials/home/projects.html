<section class="fmb-hero" aria-labelledby="fmb-title">
  <div class="fmb-hero__inner">
    <div class="fmb-zone fmb-zone--robot">
      <div class="bubble-wrap" aria-live="polite">
        <div class="bubble-lead">FireMeBot says:</div>
        <div class="bubble-chat"><div class="bubble-text"></div></div>
      </div>
      <figure class="fmb-robot" aria-label="Animated robot head">
        <!-- Simple inline SVG robot: eyes + animated mouth -->
        <svg class="fmb-robot__svg" viewBox="0 0 200 200" role="img" aria-hidden="true">
          <defs>
            <linearGradient id="fmb-metal" x1="0" y1="0" x2="1" y2="1">
              <stop offset="0" stop-color="#d9dde2"/>
              <stop offset="1" stop-color="#b7bec7"/>
            </linearGradient>
          </defs>
          <rect class="face" x="20" y="20" width="160" height="160" rx="20" fill="url(#fmb-metal)"/>
          <circle cx="70" cy="80" r="12" fill="#222"/>
          <circle cx="130" cy="80" r="12" fill="#222"/>
          <path class="eye-smile-left" d="M58,84 Q70,74 82,84" fill="none" stroke="#22ffd9" stroke-width="6" stroke-linecap="round" opacity="0"/>
          <path class="eye-smile-right" d="M118,84 Q130,74 142,84" fill="none" stroke="#22ffd9" stroke-width="6" stroke-linecap="round" opacity="0"/>
          <g class="fmb-lids" aria-hidden="true">
            <rect class="lid-left" x="58" y="68" width="24" height="24" rx="12" fill="#061a2b" opacity="0"/>
            <rect class="lid-right" x="118" y="68" width="24" height="24" rx="12" fill="#061a2b" opacity="0"/>
          </g>
          <g class="fmb-brows">
            <rect class="brow-left" x="52" y="64" width="36" height="6" rx="3" fill="#22ffd9" opacity="0.7"/>
            <rect class="brow-right" x="112" y="64" width="36" height="6" rx="3" fill="#22ffd9" opacity="0.7"/>
          </g>
          <g class="fmb-mouth">
            <rect class="mouth-neutral" x="60" y="120" width="80" height="16" rx="8" fill="#222"/>
            <path class="mouth-smile" d="M60,126 Q100,150 140,126" fill="none" stroke="#22ffd9" stroke-width="6" stroke-linecap="round" opacity="0"/>
            <path class="mouth-frown" d="M60,138 Q100,112 140,138" fill="none" stroke="#ff5b5b" stroke-width="6" stroke-linecap="round" opacity="0"/>
          </g>
          <g class="fmb-aerial">
            <rect x="96" y="4" width="8" height="20" rx="4" fill="#7b8794"/>
          </g>
        </svg>
      </figure>
    </div>
    <div class="fmb-zone fmb-zone--interact">
      <div class="fmb-content">
        <header class="fmb-head">
          <h2 id="fmb-title">Will AI replace your job?</h2>
          <p class="fmb-tag">Type any job. Get a brutally honest score.</p>
        </header>

        <form class="fmb-form" autocomplete="off">
          <label class="sr-only" for="fmb-job">Job title</label>
          <div class="fmb-inputrow">
            <input id="fmb-job" name="job" type="text" inputmode="text" placeholder="e.g., Social Media Manager" required>
            <button class="fmb-btn" type="submit"></button>
          </div>
          <div class="fmb-chips" role="list">
            <button class="fmb-chip" role="listitem" type="button" data-job="Barista">Barista</button>
            <button class="fmb-chip" role="listitem" type="button" data-job="Paralegal">Paralegal</button>
            <button class="fmb-chip" role="listitem" type="button" data-job="Copywriter">Copywriter</button>
          </div>
        </form>

        <div class="fmb-score" role="status" aria-live="polite">
          <div class="fmb-scorehead">
            <h3 class="fmb-scoretitle">Replaceability score</h3>
            <span class="fmb-scorehint">Higher = more automatable</span>
          </div>
          <div class="fmb-meter" aria-hidden="true"><span class="fmb-fill" style="width:42%"></span></div>
          <div class="fmb-scoretext"><strong class="fmb-percent">42%</strong> replaceable</div>
        </div>
        <div class="fmb-bubble" aria-live="polite">
          
          <span class="fmb-bubble__text">Submitting TPS reports is a hobby, not a career path.</span>
        </div>
      </div>
    </div>
    <div class="fmb-zone fmb-zone--footer">
      <div class="fmb-ctas">
        <a class="fmb-btn fmb-btn--primary" target="_blank" rel="noopener noreferrer" href="/https://www.firemebot.com/">Try FireMeBot</a>
        <a id="howworks-btn"
          class="fmb-btn fmb-btn--ghost"
          href="#howworks-faq"
          role="button"
          aria-controls="howworks-faq"
          aria-expanded="false">How it works</a>
      </div>
      <p class="fmb-disclaimer">Deterministic demo score. Itâ€™s a bit, not a forecast.</p>
      <details id="howworks-faq" class="fmb-faq">
        <summary>How this works</summary>
        <p>This demo is 100% satire, and is NOT an accurate predictor of actual job market trends. The demo on this page hashes your input into a repeatable percent and is mapped it to broad tiers. Your output on this page is NOT accurate. For results generated by this demo AND by the premium-tier FireMeBot application, natwerth.com and any of its subsidiaries are not responsible for decisions made based on FireMeBot results.</p>
      </details>
    </div>
  </div>

  <div class="fmb-sticky" aria-live="polite" aria-label="FireMeBot" hidden>
    <button class="fmb-fab" aria-expanded="false" aria-label="Open FireMeBot">
      <svg class="fmb-mini" viewBox="0 0 200 200" role="img" aria-hidden="true">
        <defs>
          <linearGradient id="fmb-metal-mini" x1="0" y1="0" x2="1" y2="1">
            <stop offset="0" stop-color="#d9dde2"/>
            <stop offset="1" stop-color="#b7bec7"/>
          </linearGradient>
        </defs>
        <!-- Head plate uses same class so tier tints apply -->
        <rect class="face" x="20" y="20" width="160" height="160" rx="20" fill="url(#fmb-metal-mini)"/>
        <!-- Eyes at the same coordinates as main so CSS selectors match -->
        <circle cx="70" cy="80" r="12" fill="#222"/>
        <circle cx="130" cy="80" r="12" fill="#222"/>
        <!-- Happy eye arcs (hidden by default, shown on low tier) -->
        <path class="eye-smile-left" d="M58,84 Q70,74 82,84" fill="none" stroke="#22ffd9" stroke-width="6" stroke-linecap="round" opacity="0"/>
        <path class="eye-smile-right" d="M118,84 Q130,74 142,84" fill="none" stroke="#22ffd9" stroke-width="6" stroke-linecap="round" opacity="0"/>
        <!-- Brows group uses same rect sizes/positions so transforms apply -->
        <g class="fmb-brows">
          <rect class="brow-left" x="52" y="64" width="36" height="6" rx="3" fill="#22ffd9" opacity="0.7"/>
          <rect class="brow-right" x="112" y="64" width="36" height="6" rx="3" fill="#22ffd9" opacity="0.7"/>
        </g>
        <!-- Mouth shapes with same classes -->
        <g class="fmb-mouth">
          <rect class="mouth-neutral" x="60" y="120" width="80" height="16" rx="8" fill="#222"/>
          <path class="mouth-smile" d="M60,126 Q100,150 140,126" fill="none" stroke="#22ffd9" stroke-width="6" stroke-linecap="round" opacity="0"/>
          <path class="mouth-frown" d="M60,138 Q100,112 140,138" fill="none" stroke="#ff5b5b" stroke-width="6" stroke-linecap="round" opacity="0"/>
        </g>
        <g class="fmb-aerial">
          <rect x="96" y="4" width="8" height="20" rx="4" fill="#7b8794"/>
        </g>
      </svg>
    </button>
    <div class="fmb-sticky__panel" role="dialog" aria-label="Try FireMeBot" hidden>
      <button class="fmb-sticky__close" aria-label="Close">âœ•</button>
      <div class="fmb-sticky__title">ðŸ‘‹ Hi! I'm FireMeBot!</div>
      <div class="fmb-sticky__actions">
        <a class="fmb-btn fmb-btn--primary" target="_blank" rel="noopener noreferrer" href="/https://www.firemebot.com/">Try FireMeBot</a>
      </div>
    </div>
  </div>
  <style>
    /* Full-bleed container that escapes centered wrappers */
    .fmb-hero { width: 100vw; margin-inline: calc(50% - 50vw); background: #061a2b; color: #2fffe1; padding-block: clamp(24px,6vw,72px); }
    .fmb-hero__inner { max-width: 1100px; margin-inline: auto; padding-inline: 1rem; display: grid; gap: clamp(16px, 3vw, 32px); align-items: center; grid-template-columns: 1fr; }
    @media (min-width: 900px){ .fmb-hero__inner { grid-template-columns: 1fr 1fr; } }

    /* Zones: robot, interact, footer */
    .fmb-zone{ width:100%; }
    .fmb-zone--robot{ display:flex; flex-direction: column; align-items:center; justify-content:center; gap: clamp(.75rem, 2vw, 1.25rem); padding-block: clamp(8px, 2vw, 16px); position: relative; z-index: 1; }

    /* CSS verdict bubble above robot */
    .bubble-wrap{ position: relative; width: auto; max-width: 92%; align-self: flex-end; }
    .bubble-lead{ font-size:.9rem; opacity:.85; margin: 0 0 .35rem auto; color: #2fffe1; }
    .bubble-chat{ position: relative; display:inline-block; --bubble-bg: #ffffff; --bubble-stroke: #b7bec7; background: var(--bubble-bg); border: 1px solid var(--bubble-stroke); border-radius: 16px; padding: .5rem .9rem; color:#061a2b; box-shadow: 0 3px 6px rgba(0,0,0,.05); max-width: min(38ch, 92vw); }
    .bubble-text{ position: relative; font-weight:600; letter-spacing:.2px; }
    /* bottom-centered tail with matching border + fill */
    .bubble-chat::before{ content:""; position:absolute; left: calc(50% - 12px); top: 100%; width:0; height:0; border-left:12px solid transparent; border-right:12px solid transparent; border-top:12px solid var(--bubble-stroke); }
    .bubble-chat::after{ content:""; position:absolute; left: calc(50% - 11px); top: 100%; width:0; height:0; border-left:11px solid transparent; border-right:11px solid transparent; border-top:11px solid var(--bubble-bg); }
    /* Tier theming via solid colors (opaque) */
    .fmb-hero.is-low  .bubble-chat{ --bubble-bg: #CFFDF6; --bubble-stroke: #22ffd9; }
    .fmb-hero.is-med  .bubble-chat{ --bubble-bg: #FFF3BF; --bubble-stroke: #ffe66d; }
    .fmb-hero.is-high .bubble-chat{ --bubble-bg: #FFD2D2; --bubble-stroke: #ff6b6b; }
    @media (min-width: 900px){ .fmb-zone--footer{ grid-column: 1 / -1; } }
    .fmb-btn:hover{ transform: translateY(-1px); box-shadow: 0 12px 28px rgba(0,0,0,.35); }
    .fmb-btn:focus-visible{ outline:2px solid currentColor; outline-offset:2px; }
    .fmb-btn--primary:hover{ filter: brightness(1.05); }
    .fmb-btn--ghost:hover{ background: rgba(47,255,225,.1); }
    .fmb-zone--interact{ display:block; padding-block: clamp(8px, 2vw, 16px); }
    .fmb-zone--footer{ display:flex; flex-direction:column; align-items:center; text-align:center; gap:.5rem; padding-block: clamp(12px, 3vw, 20px); }
    .fmb-zone--footer .fmb-ctas{ justify-content:center; }
    .fmb-zone--footer .fmb-disclaimer{ max-width: 65ch; padding-top: 2rem;}

    .fmb-head { display:flex; flex-direction:column; gap:.25rem; }
    .fmb-head h2 { font-size: clamp(28px, 4vw, 40px); margin: 0; }
    /* Sticky FAB + expandable panel */
    .fmb-sticky{ position: fixed; right: clamp(12px, 3vw, 22px); bottom: clamp(12px, 3vw, 22px); z-index: 70; display:flex; align-items:flex-end; gap:.5rem; }
    .fmb-sticky[hidden]{ display:none; }

    /* Floating action button */
    .fmb-fab{ width:56px; height:56px; border-radius:50%; border:2px solid #061a2b; position: relative; background: rgba(6,26,43,.78); color:#2fffe1; display:grid; place-items:center; cursor:pointer; box-shadow: 0 3px 6px rgba(0,0,0,.05); transition: transform .15s ease, box-shadow .2s ease, background .2s ease, backdrop-filter .2s ease; backdrop-filter: blur(14px) saturate(140%); -webkit-backdrop-filter: blur(14px) saturate(140%); overflow: visible; }
    .fmb-fab:hover{ transform: translateY(-1px); box-shadow: 0 6px 8px rgba(0,0,0,.05); }
    /* Inner tier-colored ring */
    .fmb-fab::before{ content:""; position:absolute; inset:3px; border:2px solid rgba(47,255,225,.6); border-radius:50%; pointer-events:none; }
    .fmb-fab:focus-visible{ outline:2px solid #2fffe1; outline-offset:2px; }
    .fmb-mini{ width:30px; height:30px; }

    /* Tier-aware ring */
    .fmb-hero.is-low  .fmb-fab::before{ border-color:#22ffd9; }
    .fmb-hero.is-med  .fmb-fab::before{ border-color:#ffe66d; }
    .fmb-hero.is-high .fmb-fab::before{ border-color:#ff6b6b; }

    /* Expandable panel */
    .fmb-sticky__panel{ position: relative; background:#061a2b; color:#2fffe1; border:1px solid rgba(47,255,225,.6); border-radius: 12px; padding:.7rem .9rem .8rem; min-width: 220px; max-width: 280px; box-shadow: 0 14px 34px rgba(0,0,0,.45); transform-origin: bottom right; }
    .fmb-sticky__title{ font-weight:700; font-size:.95rem; margin:0 1.1rem .5rem 0; }
    .fmb-sticky__actions{ display:flex; gap:.5rem; }
    .fmb-sticky__close{ position:absolute; top:6px; right:6px; width:28px; height:28px; border-radius:50%; border:1px solid rgba(47,255,225,.45); background: transparent; color:#2fffe1; cursor:pointer; display:grid; place-items:center; }
    .fmb-sticky__close:hover{ background: rgba(47,255,225,.1); }

    /* Open/close transitions */
    @keyframes panelIn{ 0%{ transform: scale(.96); opacity:0; } 100%{ transform: scale(1); opacity:1; } }
    /* Stronger, dual-contrast pulse that works on light or dark BGs */
    @keyframes pulseFab {
      0% {
        box-shadow:
          0 0 0 0 rgba(6,26,43,0),        /* dark underlay off */
          0 0 0 0 rgba(47,255,225,0);     /* teal halo off */
      }
      60% {
        box-shadow:
          0 0 0 2px rgba(6,26,43,.35),    /* crisp dark edge for light BGs */
          0 0 0 14px rgba(47,255,225,.28);/* wider, brighter halo */
      }
      100% {
        box-shadow:
          0 0 0 0 rgba(6,26,43,0),
          0 0 0 0 rgba(47,255,225,0);
      }
    }

    /* keep your open animation as-is */
    .fmb-sticky.is-open .fmb-sticky__panel { animation: panelIn .18s ease-out; }

    /* nudge trigger */
    .fmb-sticky.attn .fmb-fab { animation: pulseFab 1.4s ease-out 1; }
    @keyframes fabIn { 
      0% { transform: translateY(14px); opacity: 0; }
      100% { transform: none; opacity: 1; }
    }
    .fmb-sticky.just-born .fmb-fab { animation: fabIn .22s ease-out both; }

    @keyframes faceWag { 
      0%   { transform: scale(1) rotate(0deg); }
      20%  { transform: scale(1.25) rotate(-10deg); }
      50%  { transform: scale(1.20) rotate(10deg); }
      80%  { transform: scale(1.22) rotate(-6deg); }
      100% { transform: scale(1) rotate(0deg); }
    }
    @keyframes fabShake { 
      0%,100% { transform: translateX(0); } 
      25% { transform: translateX(-2px); } 
      75% { transform: translateX(2px); } 
    }
    .fmb-fab.is-wag .fmb-mini { 
      animation: faceWag .9s ease-in-out 1; 
      filter: drop-shadow(0 6px 16px rgba(0,0,0,.35)); 
    }
    .fmb-fab.is-wag { animation: fabShake .9s ease-in-out 1; }

    @media (prefers-reduced-motion: reduce){
      .fmb-sticky.is-open .fmb-sticky__panel, .fmb-sticky.attn .fmb-fab{ animation:none; }
    }
    .fmb-tag { opacity: .85; margin: 0; }

    .fmb-robot { margin: 0; display: grid; place-items: center; }
    .fmb-robot__svg { width: clamp(220px, 40vw, 360px); height: auto; filter: drop-shadow(0 8px 20px rgba(0,0,0,.15)); }

    /* Idle sway on the head */
    @keyframes sway { 0%{ transform: rotate(0deg) translateY(0);} 50%{ transform: rotate(-0.8deg) translateY(0.6px);} 100%{ transform: rotate(0deg) translateY(0);} }
    .fmb-robot__svg{ animation: sway 6s ease-in-out infinite; }
    .fmb-hero.is-high .fmb-robot__svg{ animation-duration: 3.5s; }

    /* Antenna gentle wave */
    @keyframes antenna { 0%,100%{ transform: rotate(0deg);} 50%{ transform: rotate(6deg);} }
    .fmb-aerial{ transform-origin: 100px 12px; animation: antenna 4.5s ease-in-out infinite; }


    /* Eye animations disabled */
    .fmb-lids{ display:none; }
    @media (prefers-reduced-motion: reduce){
      .fmb-robot__svg, .fmb-aerial{ animation: none; }
    }


    .fmb-form { margin-block: .5rem; padding-top: 2rem;}
    /* Subtle form submit button */
    .fmb-form .fmb-btn[type="submit"]{
      background: transparent;
      color:#2fffe1;
      border-color: rgba(47,255,225,.35);
      box-shadow: none;
      opacity:.9;
      padding:.65rem .85rem;
    }
    .fmb-form .fmb-btn[type="submit"]::before { content: "Go"; } /* if you want text tweak, optional */
    .fmb-form .fmb-btn[type="submit"]:hover{
      background: rgba(47,255,225,.08);
      box-shadow: none;
      transform: translateY(0);
    }
    .fmb-form .fmb-btn[type="submit"]:active{ transform: translateY(1px); }

    .fmb-inputrow { display:flex; gap:.5rem; }
    .fmb-inputrow input { flex:1; min-width: 0; padding:.75rem .9rem; border-radius:.6rem; border:1px solid rgba(47,255,225,.6); background: #041521; color:#2fffe1; caret-color:#2fffe1; box-shadow: inset 0 0 0 1px rgba(47,255,225,.15); }
    .fmb-btn { display:inline-flex; align-items:center; justify-content:center; padding:.75rem 1rem; border-radius:.6rem; border:1px solid rgba(47,255,225,.65); color:#061a2b; background:#2fffe1; text-decoration:none; cursor:pointer; transition: transform .08s ease, box-shadow .2s ease; box-shadow: 0 6px 16px rgba(0,0,0,.25); }
    .fmb-btn:active, .fmb-btn.is-pressing { transform: translateY(1px) scale(.99); box-shadow: 0 2px 8px rgba(0,0,0,.25); }
    .fmb-btn--ghost { background: transparent; color:#2fffe1; border-color: rgba(47,255,225,.5); border: 2px solid; font-weight: 600; }
    .fmb-btn--primary { background:#2fffe1; color:#061a2b; border-color: rgba(47,255,225,.85); font-weight: 600; }

    .fmb-label{ font-weight:600; margin:0 0 .25rem; }
    .fmb-help{ margin:.25rem 0 .5rem; opacity:.8; font-size:.9rem; }
    .fmb-chips{ display:flex; flex-wrap:wrap; gap:.5rem; margin:.25rem 0 0; }
    .fmb-chip{ background:transparent; border:1px solid rgba(47,255,225,.45); color:#2fffe1; padding:.35rem .6rem; border-radius:999px; cursor:pointer; }
    .fmb-scorehead{ display:flex; align-items:baseline; gap:.5rem; justify-content:space-between; }
    .fmb-scoretitle{ margin:0; font-size:1rem; padding-top: 2rem }
    .fmb-scorehint{ opacity:.75; font-size:.85rem; }
    /* Verdict chip */
    .fmb-verdict{ display:flex; align-items:center; gap:.5rem; margin:.25rem 0 .75rem; }
    .fmb-verdict__lead{ opacity:.8; font-size:.95rem; }
    .fmb-verdict__chip{ font-weight:700; letter-spacing:.4px; padding:.25rem .6rem; border-radius:999px; border:1px solid currentColor; }
    .fmb-hero.is-low  .fmb-verdict__chip{ color:#022e2a; background:#22ffd9; border-color: rgba(34,255,217,.6); }
    .fmb-hero.is-med  .fmb-verdict__chip{ color:#3a2a00; background:#ffe66d; border-color: rgba(255,230,109,.6); }
    .fmb-hero.is-high .fmb-verdict__chip{ color:#2b0101; background:#ff6b6b; border-color: rgba(255,107,107,.65); }

    /* Dramatic robot auras and motion */
    .fmb-robot{ position:relative; }
    .fmb-robot::before{ content:""; position:absolute; inset:-10% -6%; border-radius:50%; filter: blur(40px); opacity:.35; pointer-events:none; transform: scale(1); transition: background .25s ease, opacity .25s ease, transform .25s ease; }
    .fmb-hero.is-low  .fmb-robot::before{ background: radial-gradient(60% 60% at 50% 50%, rgba(34,255,217,.35), transparent 70%); }
    .fmb-hero.is-med  .fmb-robot::before{ background: radial-gradient(60% 60% at 50% 50%, rgba(255,230,109,.35), transparent 70%); }
    .fmb-hero.is-high .fmb-robot::before{ background: radial-gradient(65% 65% at 50% 50%, rgba(255,107,107,.55), transparent 80%); opacity:.7; transform: scale(1.08); filter: blur(52px); }

    /* Antenna pulse per tier */
    @keyframes beacon { 0%{ transform: scale(1); filter: drop-shadow(0 0 0 rgba(255,255,255,0)); } 50%{ transform: scale(1.25); filter: drop-shadow(0 0 12px rgba(255,255,255,.55)); } 100%{ transform: scale(1); filter: drop-shadow(0 0 0 rgba(255,255,255,0)); } }
    .fmb-hero.is-high .fmb-aerial circle{ animation: beacon .9s ease-in-out infinite; }
    .fmb-hero.is-med  .fmb-aerial circle{ animation: beacon 1.4s ease-in-out infinite; }

    /* Head tremor on high risk */
    @keyframes tremor { 0%,100%{ transform: translate3d(0,0,0); } 20%{ transform: translate3d(-1px,0,0); } 40%{ transform: translate3d(1px,0,0); } 60%{ transform: translate3d(-.6px,0,0); } 80%{ transform: translate3d(.6px,0,0); } }
    .fmb-hero.is-high .fmb-robot__svg{ animation: tremor .25s linear infinite; }

    /* Mouth and brows: more dramatic */
    .fmb-hero .mouth-smile, .fmb-hero .mouth-frown{ transition: opacity .2s ease; }
    .mouth-neutral{ transition: opacity .2s ease; }
    .fmb-brows .brow-left, .fmb-brows .brow-right{ transition: transform .2s ease, fill .2s ease; }
    .fmb-hero.is-low  .mouth-neutral{ opacity:0; }
    .fmb-hero.is-low  .mouth-smile{ opacity:1; filter: drop-shadow(0 0 6px rgba(34,255,217,.6)); }
    .fmb-hero.is-high .mouth-neutral{ opacity:0; }
    .fmb-hero.is-high .mouth-frown{ opacity:1; filter: drop-shadow(0 0 8px rgba(255,107,107,.6)); }


    /* Eyes: size + color shift */
    .fmb-hero.is-low  circle[cx="70"],
    .fmb-hero.is-low  circle[cx="130"]{ r:13; fill:#0b2; }
    .fmb-hero.is-med  circle[cx="70"],
    .fmb-hero.is-med  circle[cx="130"]{ r:11; fill:#fb0; }
    .fmb-hero.is-high circle[cx="70"],
    .fmb-hero.is-high circle[cx="130"]{ r:8;  fill:#b00; filter: drop-shadow(0 0 6px rgba(255,0,0,.6)); }

    /* Happy eyes as upturned curves */
    .eye-smile-left, .eye-smile-right{ opacity:0; transition: opacity .2s ease; }
    .fmb-hero.is-low  .eye-smile-left,
    .fmb-hero.is-low  .eye-smile-right{ opacity:1; filter: drop-shadow(0 0 6px rgba(34,255,217,.6)); }
    .fmb-hero.is-low  circle[cx="70"],
    .fmb-hero.is-low  circle[cx="130"]{ opacity:0; }

    .fmb-score { display:grid; gap:.5rem; margin-block:.5rem 1rem; }
    .fmb-meter { height:12px; background: rgba(47,255,225,.18); border-radius:999px; overflow:hidden; box-shadow: inset 0 0 0 1px rgba(47,255,225,.2); }
    .fmb-fill { display:block; height:100%; background: #2fffe1; border-radius:999px; transition: width .9s cubic-bezier(.2,.8,.2,1); }
    /* Tier color states */
    .fmb-hero.is-low  .fmb-fill{ background:#22ffd9; }
    .fmb-hero.is-med  .fmb-fill{ background:#ffe66d; }
    .fmb-hero.is-high .fmb-fill{ background:#ff6b6b; }
    .fmb-hero.is-low  .fmb-aerial circle{ fill:#22ffd9; }
    .fmb-hero.is-med  .fmb-aerial circle{ fill:#ffe66d; }
    .fmb-hero.is-high .fmb-aerial circle{ fill:#ff6b6b; }
    /* Face tint by tier */
    .fmb-hero .face{ transition: fill .25s ease; }
    .fmb-hero.is-low  .face{ fill:#0fae84; }
    .fmb-hero.is-med  .face{ fill:#caa62b; }
    .fmb-hero.is-high .face{ fill:#c43a3a; }


    .fmb-scoretext { font-size:.95rem; opacity:.9; }
    .fmb-result { min-height: 1.5em; font-size: 1rem; letter-spacing:.2px; }
    .fmb-result .caret { display:inline-block; width:.6ch; border-right:2px solid #2fffe1; transform: translateY(2px); animation: caretBlink 1s step-end infinite; }
    @keyframes caretBlink { 50% { border-color: transparent; } }

    .fmb-bubble::after { content:""; position:absolute; left: 16px; top: 100%; width: 0; height: 0; border-left: 10px solid transparent; border-right: 10px solid transparent; border-top: 10px solid rgba(255,255,255,.06); filter: drop-shadow(0 4px 6px rgba(0,0,0,.18)); }

    .fmb-ctas { display:flex; gap:.75rem; margin-top: 1rem; flex-wrap: wrap; }

    /* Visually-hidden utility for labels */
    .sr-only { position:absolute; width:1px; height:1px; padding:0; margin:-1px; overflow:hidden; clip:rect(0,0,0,0); white-space:nowrap; border:0; }

    /* Brows: calm â†’ arched â†’ aggressive */
    .fmb-hero.is-low  .brow-left{ transform: rotate(-10deg) translate(0,-4px); transform-origin: 70px 67px; fill:#22ffd9; }
    .fmb-hero.is-low  .brow-right{ transform: rotate(10deg) translate(0,-4px);  transform-origin: 130px 67px; fill:#22ffd9; }
    .fmb-hero.is-med  .brow-left{ transform: rotate(6deg) translate(1px,-1px); transform-origin: 70px 67px; fill:#ffe66d; }
    .fmb-hero.is-med  .brow-right{ transform: rotate(-6deg) translate(-1px,-1px); transform-origin: 130px 67px; fill:#ffe66d; }
    .fmb-hero.is-high .brow-left{ transform: rotate(20deg) translate(6px,-6px) scale(1.6,1.7); transform-origin: 70px 67px; fill:#ff6b6b; }
    .fmb-hero.is-high .brow-right{ transform: rotate(-20deg) translate(-6px,-6px) scale(1.6,1.7); transform-origin: 130px 67px; fill:#ff6b6b; }
  </style>

  <script>
    (function(){
      const form = document.querySelector('.fmb-form');
      const input = document.getElementById('fmb-job');
      const fill = document.querySelector('.fmb-fill');
      const percentEl = document.querySelector('.fmb-percent');
      const bubble = document.querySelector('.fmb-bubble__text');
      const mouth = document.querySelector('.fmb-mouth');
      const lids = document.querySelector('.fmb-lids');

      const scanBtn = document.querySelector('.fmb-btn[type="submit"]');
      const sticky = document.querySelector('.fmb-sticky');
      const fab = sticky ? sticky.querySelector('.fmb-fab') : null;
      const panel = sticky ? sticky.querySelector('.fmb-sticky__panel') : null;
      const stickyCta = sticky ? sticky.querySelector('.fmb-sticky__cta') : null;
      const stickyClose = sticky ? sticky.querySelector('.fmb-sticky__close') : null;
      const howBtn = document.getElementById('howworks-btn');
      const faq    = document.getElementById('howworks-faq');

      if (howBtn && faq) {
        howBtn.addEventListener('click', (e) => {
          // stop the anchor jump
          e.preventDefault();

          // native toggle is click on the <summary>, but flipping .open is fine too
          faq.open = !faq.open;

          // keep a11y state in sync
          howBtn.setAttribute('aria-expanded', String(faq.open));

          // optional: bring it into view when opening
          if (faq.open) {
            faq.scrollIntoView({ behavior: 'smooth', block: 'center' });
          }
        });
      }
      
      let job = 'office worker';

      function sleep(ms){ return new Promise(r => setTimeout(r, ms)); }

      let typingId = 0;
      async function typeBubble(text, charMs = 22){
        const el = document.querySelector('.bubble-text');
        if(!el) return;
        const id = ++typingId;
        el.textContent = '';
        for(let i=0;i<text.length;i++){
          if(id !== typingId) return; // cancel if superseded
          el.textContent += text[i];
          await sleep(charMs);
        }
      }

      async function typeInto(el, text, charMs){
        el.value = '';
        for(let i=0;i<text.length;i++){
          el.value += text[i];
          await sleep(charMs);
        }
      }


      const templates = [
        "{job}? Bold to call that a profession.",
        "If ctrl+c is your superpower, Iâ€™m your replacement, {job}.",
        "I do in milliseconds what you calendar for Tuesday, {job}.",
        "Pivot tables arenCt personality traits, {job}.",
        "Your onboarding doc is just my warmâ€‘up, {job}.",
        "Iâ€™m the coworker that doesnâ€™t eat the team snacks, {job}.",
        "Meetings about meetings? I auto-decline, {job}.",
        "If it fits in a checklist, it fits in my RAM, {job}."
      ];

      function hashToPercent(str){
        let h = 0; for(let i=0;i<str.length;i++){ h = Math.imul(31, h) + str.charCodeAt(i) | 0; }
        const n = Math.abs(h % 101); // 0..100
        // Nudge extremes a bit less boring
        return Math.max(5, Math.min(97, n));
      }

      function updateScore(){
        const p = hashToPercent(job.toLowerCase());
        fill.style.width = p + '%';
        percentEl.textContent = p + '%';
        const root = document.querySelector('.fmb-hero');
        root.classList.remove('is-low','is-med','is-high');
        const tierClass = p >= 55 ? 'is-high' : p >= 30 ? 'is-med' : 'is-low';
        root.classList.add(tierClass);
        // Verdict chip
        const chip = document.querySelector('.fmb-verdict__chip');
        if(chip){
          if(tierClass === 'is-high'){ chip.dataset.tier = 'high'; chip.textContent = 'SASHAY, AWAY.'; }
          else if(tierClass === 'is-med'){ chip.dataset.tier = 'med'; chip.textContent = 'DONâ€™T MESS IT UP.'; }
          else { chip.dataset.tier = 'low'; chip.textContent = 'CHANTAY, YOU STAY.'; }
        }
        // Mirror verdict into SVG robot bubble with typewriter
        const label = tierClass === 'is-high' ? 'SASHAY, AWAY' : tierClass === 'is-med' ? 'DONâ€™T MESS IT UP.' : 'CHANTAY, YOU STAY.';
        try { typeBubble(`${label}`); } catch(_) {}
      }


      function pickInsult(){
        const i = Math.floor(Math.random() * templates.length);
        bubble.textContent = templates[i].replaceAll('{job}', job);
      }

      function showSticky(){ if(sticky && sticky.hasAttribute('hidden')) sticky.removeAttribute('hidden'); }
      function nudgeSticky(){
        if (!sticky || sticky.hasAttribute('hidden')) return;
        sticky.classList.add('attn');
        setTimeout(() => sticky.classList.remove('attn'), 550);
        if (fab) {
          fab.classList.add('is-wag');
          setTimeout(() => fab.classList.remove('is-wag'), 950);
        }
      }
      function openPanel(){ if(!sticky || !panel || !fab) return; panel.hidden = false; sticky.classList.add('is-open'); fab.setAttribute('aria-expanded','true'); }
      function closePanel(){ if(!sticky || !panel || !fab) return; panel.hidden = true; sticky.classList.remove('is-open'); fab.setAttribute('aria-expanded','false'); }

      // Rotate insults every 3.5s, pause on hover to be civilized
      let timer = null;
      function start(){ stop(); timer = setInterval(pickInsult, 3500); }
      function stop(){ if(timer){ clearInterval(timer); timer = null; } }
      const bubbleBox = document.querySelector('.fmb-bubble');
      bubbleBox.addEventListener('mouseenter', stop);
      bubbleBox.addEventListener('mouseleave', start);

      // Submit handler
      form.addEventListener('submit', function(e){
        e.preventDefault();
        job = (input.value || 'office worker').trim();
        updateScore();
        setTimeout(pickInsult, 650);
      });

      // Example chips: click to populate and scan
      const chips = document.querySelectorAll('.fmb-chip');
      chips.forEach(ch => ch.addEventListener('click', () => {
        input.value = ch.getAttribute('data-job') || '';
        form.dispatchEvent(new Event('submit', { cancelable: true }));
      }));

      // Respect reduced motion: stop mouth + slower rotation
      const prefersReduced = window.matchMedia('(prefers-reduced-motion: reduce)').matches;

      // Auto-demo loop: types samples, presses button, types result, resets
      const demoSamples = [
        'HR Coordinator',
        'Social Media Manager',
        'Paralegal',
        'Entry-Level Data Analyst',
        'Copywriter'
      ];
      let demoOn = true;

      async function pressButton(){
        scanBtn.classList.add('is-pressing');
        await sleep(120);
        scanBtn.classList.remove('is-pressing');
      }

      async function runDemo(){
        for(;;){
          if(!demoOn) { await sleep(1000); continue; }
          for(const sample of demoSamples){
            // Type sample into input
            await typeInto(input, sample, 45);
            // Simulate submit
            await pressButton();
            form.dispatchEvent(new Event('submit', { cancelable: true }));
            // Read the computed percent
            const p = parseInt(percentEl.textContent) || 42;
            // Brief hold to let fear sink in
            await sleep(1100);
            // Reset for next iteration
            input.value = '';
            fill.style.width = '0%';
            percentEl.textContent = '0%';
            await sleep(400);
          }
        }
      }

      // Pause auto-demo if the user interacts
      input.addEventListener('focus', () => { demoOn = false; });
      input.addEventListener('keydown', () => { demoOn = false; });
      scanBtn.addEventListener('click', () => { demoOn = false; });

      if(sticky){
        fab && fab.addEventListener('click', () => { if(panel && panel.hidden) openPanel(); else closePanel(); });
        stickyClose && stickyClose.addEventListener('click', closePanel);
        stickyCta && stickyCta.addEventListener('click', () => { demoOn = false; input.focus({ preventScroll: false }); closePanel(); });
        setTimeout(() => {
          showSticky();
          sticky && sticky.classList.add('just-born');
          setTimeout(() => sticky && sticky.classList.remove('just-born'), 350);
        }, 1500);

        setInterval(nudgeSticky, 5000);
        // Also close if user focuses the main input (they engaged)
        input.addEventListener('focus', closePanel);
      }

      updateScore();
      pickInsult();
      start();
      // Let the demo loop drive updates. When the user types, demo pauses automatically.

      runDemo();
    })();
  </script>
</section>
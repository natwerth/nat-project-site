/* global sanity */
/* ===== Embla Carousel: structure, tiles, controls ===== */
* { box-sizing: border-box; }
:root { --line:#e3e3e3; --ink:#111; --muted:#5c5c5c; --bg:#fff; }
body { margin:0; font:16px/1.45 system-ui,-apple-system,Segoe UI,Roboto,sans-serif; color:var(--ink); background:var(--bg); }

/* Remove wrapper padding that caused the outer gutters */
.embla { max-width:1100px; padding:40px; }

/* Create symmetric gutters via slide padding instead of wrapper padding */
.embla__viewport {
  overflow: hidden;
  touch-action: pan-y pinch-zoom;            /* allow vertical page scroll; Embla handles horizontal */
  overscroll-behavior-x: contain; /* keep wheel/trackpad gestures inside viewport */
  cursor: grab;
  padding-inline-start: 1rem;
}
.embla__viewport:active { cursor: grabbing; }
.embla__container { display:flex; margin:0 -8px; align-items: flex-start; } /* no gap; use padding */
.embla__slide { flex:0 0 33.333%; padding:0 8px;
}       /* clean thirds, even edges */

@media (max-width: 900px){ .embla__slide { flex-basis:50%; } }
@media (max-width: 560px){ .embla__slide { flex-basis:100%; } }

/* tiles */
.tile{ background:#fff; border:1px solid var(--line); border-radius:10px; overflow:hidden; display:flex; flex-direction:column; height: 100%; }
.tile__img{
  width:100%;
  aspect-ratio:5/3;
  display:block;
  object-fit:cover;
  background:#eee;
  -webkit-user-drag: none;
  user-select: none;
  pointer-events: none;
}

/* === Image aspect ratio & size variants (opt-in) ===
   Apply these as extra classes in your markup, e.g.
   <img class="tile__img tile__img--poster" ...>
*/

/* 2:3 portrait poster (Letterboxd vibe) */
.tile__img--poster {
  aspect-ratio: 2 / 3;
  width: 30%;
  height: auto;
  object-fit: cover;
  border-radius: 0.5rem; /* optional polish */
}

/* 1:1 square (profiles / album art) */
.tile__img--square {
  aspect-ratio: 1 / 1;
  width: 100%;
  height: auto;
  object-fit: cover;
  border-radius: 0.5rem;
}

/* 16:9 widescreen (stills / trailers) */
.tile__img--wide {
  aspect-ratio: 16 / 9;
  width: 100%;
  height: auto;
  object-fit: cover;
  border-radius: 0.5rem;
}

/* Smaller centered thumbnail, still 2:3 */
.tile__img--thumb {
  aspect-ratio: 2 / 3;
  width: 60%;            /* shrink relative to tile width */
  display: block;
  margin: 0 auto;        /* center horizontally */
  object-fit: cover;
  border-radius: 0.25rem;
}

/* Extra-tall poster cap (limits runaway height on huge screens) */
.tile__img--xl {
  aspect-ratio: 2 / 3;
  width: 100%;
  max-height: 600px;     /* tune as desired */
  object-fit: cover;
  border-radius: 0.75rem;
}
.tile__title, .tile__text { user-select: none; }
.tile__title{ margin:12px 12px 4px; font-size:16px; font-weight:700;
  display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden;
}

.tile__text{ margin:0 12px 12px; color:var(--muted); font-size:14px;
  display: -webkit-box; -webkit-line-clamp: 3; -webkit-box-orient: vertical; overflow: hidden;
}

/* clamp + fade + “more” control */
.tile__text-wrap {
  position: relative;
  display: flex;
  flex-direction: column;
  padding-bottom: 28px; /* space so the button doesn’t overlap text */
}

/* existing .tile__text keeps the 3-line clamp above */

.tile__fade {
  position: absolute;
  left: 0;
  right: 0;
  bottom: 28px; /* match wrapper padding-bottom */
  height: 2.4em; /* ~last 2 lines fade */
  pointer-events: none;
  background: linear-gradient(rgba(255,255,255,0), var(--bg));
}

/* Fade appears only when content is clamped */
.tile__fade { display: none; }
.tile--clamped .tile__fade { display: block; }

.tile__more {
  position: absolute;
  right: 12px;
  bottom: 6px;
  border: 0;
  background: none;
  color: var(--muted);
  font: inherit;
  padding: 2px 4px;
  cursor: pointer;
  text-decoration: underline;
}

/* Expanded state disables clamp + fade */
.tile--expanded .tile__text {
  display: block;
  -webkit-line-clamp: initial;
  overflow: visible;
}
.tile--expanded .tile__fade { display: none; }
.tile--expanded .tile__more { text-decoration: none; }

/* footer controls */
.embla__footer{ display:flex; justify-content:space-between; align-items:center; gap:16px;
  margin-block:14px;
  margin-inline:1rem;
}
.embla__nav-left{ display:flex; gap:8px; }
.embla__button {
  border: 1px solid var(--line);
  background: #fff;
  color: var(--muted);
  width: 32px;
  height: 32px;
  border-radius: 8px;
  cursor: pointer;
  font-size: 16px;
  line-height: 1;
  display: flex;
  align-items: center;
  justify-content: center;
}
.embla__button:hover {
  background: #f0f0f0;
  color: var(--ink);
}
.embla__button:disabled{ opacity:.45; cursor:not-allowed; }
.embla__nav-right{ margin-left:auto; }
.embla__dots{ display:flex; gap:8px; align-items: center; }
.embla__dot {
  width: 8px;
  height: 8px;
  padding: 0;
  border: none;
  border-radius: 50%;
  display: inline-block;
  flex: 0 0 auto;
  line-height: 0;
  background: #ccc;
  cursor: pointer;
  aspect-ratio: 1 / 1;
  appearance: none;
  -webkit-appearance: none;
}
.embla__dot.is-selected {
  background: #444;
}
.embla__dot[aria-selected="true"] {
  background: #444;
}

